<!DOCTYPE html>
<html data-theme="dark">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/files/style.css" rel="stylesheet" type="text/css" media="all">
    <link rel="icon" href="/files/icon.png?">
    <title>404 - Nobody</title>
    <style>
      div#recommendations{
        margin:50px auto;
        text-align: left;
        max-width: 600px;
        padding: 1.5rem;
      }
    </style>
  </head>
  <body>
    <br><center><h1>404 Page Not Found</h1><p id="link">The Requested Page Was Not Found</p></center><br><div id="recommendations"> </div>
    <script>
  function onLoad(){
    document.getElementById('link').innerText='"'+window.location.hostname+window.location.pathname+'" Was Not Found'
    const TOP_N = 5;
    const pages = [
      ["/index.html", "Home"],
      ["/html/v0.html", "HTML > V0"],
    processPages(pages);
    function processPages(pagesList) {
      const container = document.getElementById("recommendations");
      const attemptedPath = window.location.pathname || "/";
      const cleanedAttempt = normalizePathForCompare(attemptedPath);
      if (!cleanedAttempt) {
        container.innerHTML = "<p>No suggestions available.</p>";
        return;
      }
      const attemptChars = uniqueChars(cleanedAttempt);
      const scored = pagesList.map(item => {
        const path = String(item[0] || "");
        const title = String(item[1] || path);
        const basename = basenameFromPath(path);
        const cleanedFull = normalizePathForCompare(path);
        const charsBase = uniqueChars(basename);
        const charsFull = uniqueChars(cleanedFull);
        const sharedBase = intersectionCount(attemptChars, charsBase);
        const sharedFull = intersectionCount(attemptChars, charsFull);
        const score = Math.max(sharedBase, sharedFull);
        const which = (score === sharedBase) ? basename : cleanedFull;
        return { path, title, score, which, sharedBase, sharedFull, tokenLength: which.length };
      });
      scored.sort((a, b) => {
        if (b.score !== a.score) return b.score - a.score;
        if (b.tokenLength !== a.tokenLength) return b.tokenLength - a.tokenLength;
        return a.title.localeCompare(b.title);
      });

      const nonZero = scored.filter(s => s.score > 0);

      if (nonZero.length === 0) {
        container.innerHTML = "<center><p>No similar pages found.</p></center>";
        return;
      }

      const top = nonZero.slice(0, TOP_N);
      const html = [
        "<p><b>Did you mean:</b></p><ul>",
        ...top.map(s => {
          return `<li><a href="${escapeHtml(s.path)}">${escapeHtml(s.title)}</a></li>`;
        }),
        "</ul>"
      ].join("\n");

      container.innerHTML = html;
    }
    function normalizePathForCompare(path) {
      if (!path) return "";
      path = path.split("?")[0].split("#")[0];
      // remove extension .html or .htm
      path = path.replace(/\.html?$|\/$/i, "");
      path = path.replace(/^\/+|\/+$/g, "");
      if (!path) return "";
      // keep letters and digits
      path = path.toLowerCase().replace(/[^a-z0-9]/g, "");
      return path;
    }

    function basenameFromPath(path) {
      if (!path) return "";
      // strip query/hash
      path = path.split("?")[0].split("#")[0];
      // remove trailing slash
      path = path.replace(/\/+$/, "");
      const parts = path.split("/");
      let last = parts[parts.length - 1] || parts[parts.length - 2] || "";
      // remove extension
      last = last.replace(/\.html?$/i, "");
      return last.toLowerCase().replace(/[^a-z0-9]/g, "");
    }

    function uniqueChars(s) {
      const set = new Set();
      for (let ch of (s || "")) {
        if (ch) set.add(ch);
      }
      return set;
    }

    function intersectionCount(aSet, bSet) {
      if (!aSet || !bSet) return 0;
      let cnt = 0;
      const [small, large] = aSet.size < bSet.size ? [aSet, bSet] : [bSet, aSet];
      for (const ch of small) if (large.has(ch)) cnt++;
      return cnt;
    }
    function escapeHtml(s) {
      return String(s)
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;");
    }

  };
      window.onload=onLoad;
  </script>
  </body>
</html>
