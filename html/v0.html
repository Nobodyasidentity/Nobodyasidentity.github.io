<!DOCTYPE html>
<html data-theme="dark">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/files/style.css" rel="stylesheet" type="text/css" media="all">
    <link rel="icon" href="/files/icon.png?">
    <title>Nobody</title>
    <style>
      div.content{
        border-style: dashed;
        border-width: 1px;
        border-color: light-dark(#808080, #454545);
        border-radius: 5px;
        background-color: inherit;
        width: fit-content;
      }
      div.content iframe {
        border-style: hidden;
        border-radius: 5px;
        height: 300px;
        width: 99vw;
        resize: both;
        overflow: auto;
      }
      textarea.code{
        height: 100px;
        width: 99vw;
      }
    </style>
    <script src="/files/lzstr.js"></script>
  </head>
  <body>
    <div class="footer">Copyright © 2025, Nobodyasidentity – All right reserved.</div>
    <p style="color:red">Currently experiencing some bugs with links. Ill do my best to fix them as soon as possible</p>
    <textarea class="code" id="code" onkeyup="trygen()"></textarea><br>
    <input type="checkbox" id="doautoupd"><label for="doautoupd"> Auto</label>
    <button onclick="gen()">Generate</button>
    <button onclick="document.getElementById('linkSettings').style.display=(this.innerHTML=='Link |')?'inline-block':'none';this.innerHTML=(this.innerHTML=='Link |')?'Link >':'Link |'">Link |</button>
    <div style="display:none" id="linkSettings">
      <input type="checkbox" id="generateonload" checked=true><label for="generateonload"> Generate On Load</label>
      <button onclick="copy2clipboard('https://'+window.location.hostname+window.location.pathname+'?'+((document.getElementById('generateonload').checked)?'genonload=&':'')+'code='+encodeURIComponent(btoa(encodeURIComponent(code.value))))">Copy Permanent Link</button>
    </div><br><br>
    <div class="content"><iframe id="iframe" srcdoc='<html data-theme="dark"><link href="/files/style.css" rel="stylesheet" type="text/css" media="all"></html>'></iframe></div>
    <script>
      function getUrlVars(){var vars={};var parts=window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(m,key,value){vars[key]=value;});return vars;}
      const code = document.getElementById('code')
      const iframe = document.getElementById('iframe')
      var query = getUrlVars()
      function gen(){
        iframe.contentDocument.body.innerHTML = code.value
      }
      function trygen(){
        if(document.getElementById('doautoupd').checked==true){gen()}
      }
      function copy2clipboard(txt){
        navigator.clipboard.writeText(txt)
        alert('copied: '+txt)
      }
      function onLoad(){
        if (query['code']!=undefined){
          if(query['encoding']=='LZstr'){
            code.value=decodeURI(LZString.decompress(query['code']));
          }else{
            code.value=decodeURI(atob(decodeURI(query['code'])));
          }
        }
        if (query['genonload']!=undefined){gen()}
      }
      window.onload=onLoad
    </script>
  </body>
</html>
